<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>card91</title>
  <style>
    iframe {
      height: 100vh;
      width: 100%;
    }
  </style>

</head>

<body>
  <script>
    document.addEventListener("message", message => {
      console.log(message);
    });
    const childWindow = document.getElementById('issue-card-page').contentWindow;
    window.addEventListener('message', message => {
      debugger
      console.log(message);
    });
    function txnPage() {
      try {
        var ORIGIN = "http://localhost:3000";
        var params = {
          "payload": {
            organizationId: "230110075725799ID1OID8511344",
            cardProgramId: "230110075912904ID1CP0052872",
            uniqueId: "string",
            authUrl: `https://test.ypay.tech/card91auth/authToken`,
            cardMode: 'DIGITAL_ONLY_CARD',
            "customFields": {
              step1: [
                {
                  name: "fullName",
                  displayText: "Full Name",
                  elements: {
                    type: "text",
                    defaultValue: "Tet",
                  },
                },
                {
                  name: "mobile",
                  displayText: "Mobile No.",
                  elements: {
                    type: "text",
                    defaultValue: "917606046686",
                  },
                },
                {
                  name: "pan",
                  displayText: "PAN",
                  elements: {
                    type: "text",
                    defaultValue: "",
                  },
                },
                {
                  name: "nameOnCard",
                  displayText: "Name on card",
                  elements: {
                    type: "text",
                    defaultValue: "",
                  },
                },

              ],
              // step2: [
              //   {
              //     name: "address1",
              //     displayText: "Address",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "address2",
              //     displayText: "Street",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "pincode",
              //     displayText: "Pin code",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "state",
              //     displayText: "State",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "city",
              //     displayText: "City",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              // ],
              // step3: [
              //   {
              //     name: "pan",
              //     displayText: "PAN",
              //     elements: {
              //       type: "text",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "dob",
              //     displayText: "Date of Birth",
              //     elements: {
              //       type: "date",
              //       defaultValue: "",
              //     },
              //   },
              //   {
              //     name: "gender",
              //     displayText: "Gender",
              //     elements: {
              //       type: "select",
              //       defaultValue: "",
              //       options: [
              //         { text: "Male", value: "M" },
              //         { text: "Female", value: "M" },
              //         { text: "Transgender", value: "T" },
              //       ]
              //     },
              //   },
              // ]


            }
          },
          "type": "C91_ISSUE_CARD_SET_PARAMS"
        }
        document.getElementById("issue-card-page").contentWindow.postMessage(JSON.stringify(params), ORIGIN);
      } catch (error) {
        console.log(error);
      }
    }
    function gotoStep(step) {
      var ORIGIN = "http://localhost:3000";
      var params = {
        "payload": {
          "step": step
        },
        "type": "C91_ISSUE_CARD_SET_FORM_STEP"
      }
      document.getElementById("issue-card-page").contentWindow.postMessage(JSON.stringify(params), ORIGIN);

    }
    function onSubmit() {
      var ORIGIN = "http://localhost:3000";
      var params = {
        "payload": null,
        "type": "C91_ISSUE_CARD_SET_SUBMIT"
      }
      document.getElementById("issue-card-page").contentWindow.postMessage(JSON.stringify(params), ORIGIN);

    }

  </script>
  <iframe onLoad="txnPage()" src=" http://localhost:3000/issue-card?templateId=ypay&platform=ios" frameborder="0"
    allow="midi" id="issue-card-page"></iframe>
  <div>
    <button type="button" id="step-1" onclick="gotoStep('step1')"> Step1</button>
    <button type="button" onclick="gotoStep('step2')">Step2</button>
    <button type="button" onclick="gotoStep('step3')">Step3</button>
    <button type="button" onclick="gotoStep('step4')">Step4</button>
    <button type="button" onclick="onSubmit()">Submit</button>

  </div>
  </div>
</body>

</html>